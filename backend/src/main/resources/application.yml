server:
  port: 8080

spring:
  application:
    name: AI-Yunxun
  main:
    allow-circular-references: true

  # ==========================
  # MySQL Database
  # ==========================
  datasource:
    url: jdbc:mysql://localhost:3306/ai_yunxun?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: ai_yunxun
    password: ai_yunxun
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect

  data:
    # ==========================
    # MongoDB
    # ==========================
    mongodb:
      host: localhost
      port: 27017
      username: ai_yunxun
      password: ai_yunxun
      authentication-database: admin
      database: ai_yunxun
    # ==========================
    # Redis
    # ==========================
    redis:
      host: localhost
      port: 6379
      database: 0
      timeout: 3000ms
      password: ai_yunxun

  # ==========================
  # Neo4j
  # ==========================
  neo4j:
    uri: bolt://localhost:7687
    authentication:
      username: neo4j
      password: ai_yunxun

  ai:
    ollama:
      base-url: http://localhost:11434
      chat:
        options:
          model: qwen3:8b
    mcp:
      server:
        enabled: true
        name: mcp-server
        version: 1.0.0
        sse-endpoint: /sse
        sse-message-endpoint: /mcp/message
        capabilities:
          tool: true
          resource: true
          prompt: true
      client:
        enabled: true
        toolcallback:
          enabled: true
        servers:
          # 本地 MCP 服务器（提供 Neo4j、MongoDB、图表生成工具）
          local-mcp:
            transport: sse
            sse:
              base-url: "http://localhost:${server.port}"
              sse-endpoint: /sse
              sse-message-endpoint: /mcp/message
          # 网络搜索 MCP 服务器 - mcp-searxng（无需 API Key）
          # 安装：npm install -g mcp-searxng
          # 使用公共 SearXNG 实例，无需配置
          websearch-mcp:
            transport: stdio
            command: mcp-searxng
            # 如果需要使用自定义 SearXNG 实例，可以添加环境变量：
            # env:
            #   SEARXNG_URL: "https://your-searxng-instance.com"
# ==========================
# Logging
# ==========================
logging:
  level:
    root: INFO
    com.example: INFO
    io.lettuce.core: INFO
    org.mongodb.driver: INFO
    org.neo4j.driver: INFO
    io.modelcontextprotocol: TRACE
    org.springframework.ai.mcp: TRACE
  file:
    name: logs/app.log
