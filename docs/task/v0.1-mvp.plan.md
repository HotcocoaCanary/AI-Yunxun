# AI-Yunxun v0.1 MVP（Web UI + MCP）实现计划

## Steps

- [ ] 1. 清理配置与可启动性：移除 `application.yml` 明文密钥；改为环境变量/`application-local.yml`（不提交）；保证项目能编译启动
- [ ] 2. 补齐 LLM 基础能力：补全 `LlmClient`/`ZhipuAiLlmClient` 等缺失类；提供“非流式 + 流式”两种调用接口
- [ ] 3. 定义对外 API DTO：补齐 `/api/chat`、`/api/chat/stream` 的请求/响应结构（含 `sources`/`charts`/`traceId`）
- [ ] 4. 实现 ChatController：完成一次性接口与 SSE 流式接口；流式事件至少包含 `token`、`tool_call`、`tool_result`、`final`、`error`
- [ ] 5. 建立问答编排（Orchestrator）：组装提示词 + 上下文；驱动 LLM 产出回答；支持工具调用闭环（tool call → 执行 → 回灌 → final）
- [ ] 6. MCP Server 工具落地（Spring AI）：在 `MongoTool/Neo4jTool/WebSearchTool/EChartGenerateTool` 中实现 `@Tool` 方法，并保持入参/出参与 `docs/04-mcp-tools.md` 一致
- [ ] 7. 数据访问层实现：补齐 `repository/mongo` 与 `repository/neo4j` 的最小实现（满足 MCP 工具调用）；必要时加入 Redis 缓存（可选）
- [ ] 8. 联网搜索接入：优先通过 Spring AI MCP Client 连接外部 `mcp-searxng`；提供开关（本地实现/外部 MCP 二选一）
- [ ] 9. ECharts 生成：实现 `echart_generate`，至少支持 `line/bar/pie`；返回可直接渲染的 `option`
- [ ] 10. Web UI（HTML+JS+CSS）：完善 `static/index.html`；新增 `static/assets/app.js`、`static/assets/app.css`；支持发送消息、展示流式输出、sources 列表、ECharts 渲染（第三方包放 `static/vendor/`）
- [ ] 11. 最小验收回归：按 `docs/07-roadmap.md` 的 U0~U5 用例逐条验证；补齐必要日志（tool 名称/耗时/错误/traceId）

