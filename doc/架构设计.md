# AI-Yunxun 项目架构设计说明

## 项目结构

```
AI-Yunxun/
├── apps/
│   └── web/                      # Next.js前后端服务
├── docker/
│   └── docker-compose.yml
└── services/
    └── mcp/                      # MCP父模块
        ├── pom.xml               # 父POM（packaging: pom）
        └── server/               # 服务器模块目录
            ├── neo4j/            # Neo4j MCP服务器模块
            │   ├── pom.xml
            │   └── src/
            │       ├── main/
            │       │   ├── java/ai/canary/mcp/neo4j/
            │       │   └── resources/
            │       │       └── application.properties
            │       └── test/
            │           └── java/ai/canary/mcp/neo4j/
            └── echart/           # EChart MCP服务器模块
                ├── pom.xml
                └── src/
                    ├── main/
                    │   ├── java/ai/canary/mcp/echart/
                    │   └── resources/
                    │       └── application.properties
                    └── test/
                        └── java/ai/canary/mcp/echart/
```

## 模块说明

### 父模块：mcp

- **位置**：`services/mcp/`
- **打包方式**：`pom`
- **职责**：统一管理子模块的版本和依赖

### 子模块1：neo4j-mcp-server

- **位置**：`services/mcp/server/neo4j/`
- **功能**：Neo4j MCP服务器，提供Neo4j数据库操作工具
- **包路径**：`ai.canary.mcp.neo4j`
- **主要依赖**：Spring AI MCP Server、Neo4j Java Driver

### 子模块2：echart-mcp-server

- **位置**：`services/mcp/server/echart/`
- **功能**：EChart MCP服务器，提供EChart图表生成工具
- **包路径**：`ai.canary.mcp.echart`
- **主要依赖**：Spring AI MCP Server

## 技术栈

- **构建工具**：Maven
- **框架**：Spring Boot 3.5.9
- **MCP框架**：Spring AI 1.1.2
- **Java版本**：17

## POM配置

### 父POM配置

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.5.9</version>
        <relativePath/>
    </parent>
    
    <groupId>ai.canary</groupId>
    <artifactId>mcp</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>MCP Servers</name>
    
    <properties>
        <java.version>17</java.version>
        <spring-ai.version>1.1.2</spring-ai.version>
    </properties>
    
    <modules>
        <module>server/neo4j</module>
        <module>server/echart</module>
    </modules>
    
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.ai</groupId>
                <artifactId>spring-ai-bom</artifactId>
                <version>${spring-ai.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project>
```

### Neo4j MCP Server POM配置

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <parent>
        <groupId>ai.canary</groupId>
        <artifactId>mcp</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <relativePath>../../pom.xml</relativePath>
    </parent>
    
    <artifactId>neo4j-mcp-server</artifactId>
    <name>Neo4j MCP Server</name>
    
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.ai</groupId>
            <artifactId>spring-ai-starter-mcp-server</artifactId>
        </dependency>
        <dependency>
            <groupId>org.neo4j.driver</groupId>
            <artifactId>neo4j-java-driver</artifactId>
            <version>5.15.0</version>
        </dependency>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>
    </dependencies>
    
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project>
```

### EChart MCP Server POM配置

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
         https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    
    <parent>
        <groupId>ai.canary</groupId>
        <artifactId>mcp</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <relativePath>../../pom.xml</relativePath>
    </parent>
    
    <artifactId>echart-mcp-server</artifactId>
    <name>EChart MCP Server</name>
    
    <dependencies>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.ai</groupId>
            <artifactId>spring-ai-starter-mcp-server</artifactId>
        </dependency>
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>
    </dependencies>
    
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>
</project>
```

## 构建命令

在 `services/mcp` 目录下执行：

```bash
# 构建所有模块
mvn clean install

# 运行Neo4j MCP服务器
cd server/neo4j
mvn spring-boot:run

# 运行EChart MCP服务器
cd server/echart
mvn spring-boot:run
```

## 模块依赖关系

```
mcp (父模块)
├── 管理Spring AI版本 (1.1.2)
├── server/neo4j (neo4j-mcp-server)
│   └── 依赖: Spring Boot + Spring AI MCP Server + Neo4j Driver
└── server/echart (echart-mcp-server)
    └── 依赖: Spring Boot + Spring AI MCP Server
```

## 架构特点

- **模块化设计**：两个独立的MCP服务器模块
- **统一管理**：父模块统一管理版本和依赖
- **独立部署**：每个MCP服务器可独立运行
- **标准结构**：符合Maven标准目录结构
- **Spring AI集成**：使用Spring AI框架开发MCP服务器

