server:
  port: 8080

spring:
  application:
    name: AI-Yunxun
  main:
    allow-circular-references: true

  # ==========================
  # MySQL Database
  # ==========================
  datasource:
    url: jdbc:mysql://localhost:3306/ai_yunxun?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: ai_yunxun
    password: ai_yunxun
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect

  data:
    # ==========================
    # MongoDB
    # ==========================
    mongodb:
      host: localhost
      port: 27017
      username: ai_yunxun
      password: ai_yunxun
      authentication-database: admin
      database: ai_yunxun
    # ==========================
    # Redis
    # ==========================
    redis:
      host: localhost
      port: 6379
      database: 0
      timeout: 3000ms
      password: ai_yunxun

  # ==========================
  # Neo4j
  # ==========================
  neo4j:
    uri: bolt://localhost:7687
    authentication:
      username: neo4j
      password: ai_yunxun

  ai:
    # Ollama 配置（已替换为智谱AI API）
    # ollama:
    #   base-url: http://localhost:11434
    #   chat:
    #     options:
    #       model: qwen3:8b
    # 智谱AI 配置
    zhipu:
      api-key: da2a344e9ab04b5da76e7e352893b412.AjEnXNNc2YG0aBHm
      model: glm-4.5-flash
    mcp:
      # ==========================
      # MCP 服务器配置（本地工具）
      # ==========================
      server:
        enabled: true
        name: mcp-server
        version: 1.0.0
        # SSE 端点配置（用于 WebFlux 响应式传输）
        sse-endpoint: /sse
        sse-message-endpoint: /mcp/message
        capabilities:
          tool: true      # 启用工具能力
          resource: true  # 启用资源能力
          prompt: true    # 启用提示词能力
      # ==========================
      # MCP 客户端配置（连接外部服务器）
      # ==========================
      client:
        enabled: true
        toolcallback:
          enabled: true
        sse:
          connections:
            local-mcp:
              url: http://localhost:${server.port}/sse
              sse-endpoint: /sse
# ==========================
# Logging
# ==========================
logging:
  level:
    root: INFO
    com.example: INFO
    io.lettuce.core: INFO
    org.mongodb.driver: INFO
    org.neo4j.driver: INFO
    io.modelcontextprotocol: TRACE
    org.springframework.ai.mcp: TRACE
  file:
    name: logs/app.log
